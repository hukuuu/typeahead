define(["jquery"],function(e){function i(r){var i=this,a=e.extend({inputFrom:"input.autocomplete-from",inputTo:"input.autocomplete-to",mapHolder:"div#map_canvas"},r),f=new google.maps.places.Autocomplete(document.querySelector(a.inputFrom),{types:["(cities)"]}),l=new google.maps.places.Autocomplete(document.querySelector(a.inputTo),{types:["(cities)"]}),c=s(document.querySelector(a.mapHolder)),h=new google.maps.DirectionsRenderer,p=new google.maps.DirectionsService;return h.setMap(c),o(f,c,function(e){t=e,u(t,n,c,h,p)}),o(l,c,function(e){n=e,u(t,n,c,h,p)}),i}function s(e){var t={center:new google.maps.LatLng(42.26917949243506,24.818115234375),zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(e,t);return n}function o(e,t,n){google.maps.event.addListener(e,"place_changed",function(){var r=e.getPlace();if(!r.geometry){alert("could not find this place");return}t.setCenter(r.geometry.location),n&&typeof n=="function"&&n(e.getPlace())})}function u(e,t,n,r,i){if(!e||!t)return;var s={origin:e.geometry.location,destination:t.geometry.location,travelMode:google.maps.TravelMode.DRIVING};i.route(s,function(e,t){t==google.maps.DirectionsStatus.OK&&r.setDirections(e)})}var t,n,r={getFrom:function(){return t},getTo:function(){return n},initialize:function(e){i(e)}};return r});